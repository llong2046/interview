# Agent
**一.什么是AI Agent（智能体）？**
```
1、Agent的核心（任务解构、执行、反思认知闭环）
2、模拟人类工作范式
3、与non-agent对比（线性单次回复）
4、吴恩达：终极演进方向是构建完整认知能力的数字主体
    反思、工具调用、规划、多智能体协作
```
**二.Agent的能力演进？** 
```
L1基础工具、L2对话辅助、L3协同创作、L4智能体、L5通用智能体
```
**三.构成核心**
```
LLM、AIGC算法解决方案（提示词工程（上下文工程）、Function call、mcp）
```
**四.设计模式**
```
1.反射（自检纠错）
2.工具使用
3.Agent Reasoning and Acting 模式ReAct（推理与行动）
4.规划模式（todo、ReAct）
5.多智能体（A2A）
```
**五.function call**
```
1.它是Agent通过LLM调用外部能力（API、工具、数据库、搜索引擎等）进行整合处理闭环的过程2.流程：需求解析、工具决策、服务执行、响应生成
3.与传统API区别：结构化/自然语言、硬编码/自主决策、显示异常捕获/反射重试、mcp和a2a协议/固定通信协议
```
**六.MCP**
```
1.2024年11月25日，Anthropic提出
2.构建大模型与外部应用程序间的上下文交换规范
3.Host、Client、Server
4.是Function Call的延伸和封装
5.解决问题：规范化交互流程，解决孤岛问题
```
**七.A2A协议**
```
1.解决异构Agent互通与交互
2.核心机制：身份认证、分布式共识（实用拜占庭容错）
3.应用场景：医疗Agent通过A2A协议向药物研发Agent
```
**八.核心提示词**
```
1.核心消息类型：
    User Prompt
    Assistant Prompt（解析历史对话）
    System Prompt（大模型角色和指令）
2.8个构建要点：
    明确的目标、角色和范围
    结构化的指令与任务分解
    明确的工具集成和使用指南
    逐步推理规划
    环境和上下文
    特定领域的专业知识和限制
    安全、对齐、拒绝协议
    设定语气和互动风格
```
**AI-Search与普通Search的区别**
```
1.技术栈对比：
索引层：向量数据库/倒排索引
理解层：微调+知识图谱/词干提取+同义词扩展
执行层：ToolCalling/无
优化机制：Rag+强化学习/点击率排序
2.性能与局限
响应速度：普通Search快于AI-Search
复杂问题解决：AI-Search更适合解决复杂问题
实时性：普通Search依赖于爬虫，AI-Search能联网实时检索
结果可解释性：普通Search来源明确，AI-Search是黑盒推理，结果需要溯源
```
**DeepSerch**
```
核心理念：搜索、阅读、推理循环往复
与RAG的区别：多次迭代/单次搜索-生成
与AI-Search的区别：DeepSerch可以被视为Ai-Search解决复杂问题的策略
停止条件：Token使用限制或失败尝试次数
```
**Agent与workflow的区别**
```
核心区别：是否能够进行自主决策（流水线和有思考能力的员工）
场景：固定明确任务/开放不确定任务
Agent是workflow的进化版
```
**Agent的局限性**
```
幻觉、上下文长度和规划缺陷、多模态处理不成熟、行业适配困难（零失误要求）、计算成本高
```
**Agent记忆设计**
```
分层记忆系统：
    短期记忆:依赖于上下文记忆（4k-128k）一个汉字占2个字节
    中期记忆:将对话的关键信息压缩成摘要或嵌入向量，存储在向量数据库中，支持语义检索
    长期记忆:持久化存储用户画像、行为习惯等结构化数据（sql\NoSQL、只是图谱）
混合存储引擎：
    向量数据库：非结构化文本的相似性检索，检索用户偏好
    时序数据库: 事件链，如用户上周询问机票价格
    图数据库：构建知识关联网络
```
**Agent开发方式**
```
工作流：n8n、dify
开发框架：AutoGen、CrewAI
``` 
**延伸问题**
```
什么是多跳？
单跳是从一个信息源查询问题，如北京是中国的首都
多跳是从多个信息源查询问题，如《哪吒》的导演执导的第一步电影是什么？ 需要先知道导演是谁然后
``` 
